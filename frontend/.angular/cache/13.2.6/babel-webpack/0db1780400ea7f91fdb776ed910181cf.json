{"ast":null,"code":"import _asyncToGenerator from \"/Users/macbook/Projects/php/cadastro-livros/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./shared/livro.service\";\nimport * as i2 from \"../service/toast.service\";\nexport class LivroComponent {\n  constructor(httpProvider, toastService) {\n    this.httpProvider = httpProvider;\n    this.toastService = toastService;\n    this.itemList = [];\n    this.carregando = false;\n    this.form = {\n      Codl: null,\n      Descricao: null\n    };\n    this.txtAddUpdate = '';\n    this.idDel = 0;\n  }\n  ngOnInit() {\n    this.getAll();\n  }\n  getAll() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      _this.carregando = true;\n      _this.httpProvider.read().subscribe(res => {\n        if (res != null && res.body.data != null) {\n          _this.itemList = res.body.data;\n          _this.carregando = false;\n        }\n      });\n    })();\n  }\n  removeToast(index) {\n    this.toastService.remove(index);\n  }\n  selectAddUpdate(type) {\n    if (type === 'add') {\n      this.txtAddUpdate = 'Adicionar';\n    } else {\n      this.txtAddUpdate = 'Alterar';\n    }\n  }\n  onCreateUpdate() {\n    if (!this.form.Descricao) {\n      this.toastService.add('Preencha os campos obrigatório(s)', 3000, 'error');\n      return false;\n    }\n    this.carregando = true;\n    if (!this.form.Codl) {\n      // create\n      this.httpProvider.create(this.form).subscribe(response => {\n        if (response) {\n          this.toastService.add(\"Dados salvos com sucesso!\", 3000, 'success');\n          this.getAll();\n        }\n      });\n    } else {\n      //update\n      this.httpProvider.update(this.form, this.form.Codl).subscribe(response => {\n        if (response) {\n          this.toastService.add(\"Dados alterados com sucesso!\", 3000, 'success');\n          this.getAll();\n        }\n      });\n    }\n    return;\n  }\n  onEdit(id) {\n    if (id) {\n      this.carregando = true;\n      this.httpProvider.edit(id).subscribe(res => {\n        if (res != null && res.body.data != null) {\n          this.form = Object.assign({}, res.body.data);\n          this.carregando = false;\n        }\n      });\n    }\n  }\n  onDelete(id) {\n    this.idDel = id;\n  }\n  onSubmitDelete() {\n    if (this.idDel) {\n      this.carregando = true;\n      this.httpProvider.delete(this.idDel).subscribe(response => {\n        if (response) {\n          this.toastService.add(\"Dados deletados com sucesso!\", 3000, 'success');\n          this.getAll();\n        }\n      });\n    }\n  }\n}\nLivroComponent.ɵfac = function LivroComponent_Factory(t) {\n  return new (t || LivroComponent)(i0.ɵɵdirectiveInject(i1.LivroService), i0.ɵɵdirectiveInject(i2.ToastService));\n};\nLivroComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LivroComponent,\n  selectors: [[\"app-livro\"]],\n  decls: 2,\n  vars: 0,\n  template: function LivroComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"p\");\n      i0.ɵɵtext(1, \"livro works!\");\n      i0.ɵɵelementEnd();\n    }\n  },\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJsaXZyby5jb21wb25lbnQuY3NzIn0= */\"]\n});","map":{"version":3,"names":["i0","i1","i2","LivroComponent","constructor","httpProvider","toastService","itemList","carregando","form","Codl","Descricao","txtAddUpdate","idDel","ngOnInit","getAll","_this","_asyncToGenerator","read","subscribe","res","body","data","removeToast","index","remove","selectAddUpdate","type","onCreateUpdate","add","create","response","update","onEdit","id","edit","Object","assign","onDelete","onSubmitDelete","delete","ɵfac","LivroComponent_Factory","t","ɵɵdirectiveInject","LivroService","ToastService","ɵcmp","ɵɵdefineComponent","selectors","decls","vars","template","LivroComponent_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","styles"],"sources":["/Users/macbook/Projects/php/cadastro-livros/frontend/src/app/livro/livro.component.ts"],"sourcesContent":["import * as i0 from \"@angular/core\";\nimport * as i1 from \"./shared/livro.service\";\nimport * as i2 from \"../service/toast.service\";\nexport class LivroComponent {\n    constructor(httpProvider, toastService) {\n        this.httpProvider = httpProvider;\n        this.toastService = toastService;\n        this.itemList = [];\n        this.carregando = false;\n        this.form = {\n            Codl: null,\n            Descricao: null\n        };\n        this.txtAddUpdate = '';\n        this.idDel = 0;\n    }\n    ngOnInit() {\n        this.getAll();\n    }\n    async getAll() {\n        this.carregando = true;\n        this.httpProvider.read()\n            .subscribe(res => {\n            if (res != null && res.body.data != null) {\n                this.itemList = res.body.data;\n                this.carregando = false;\n            }\n        });\n    }\n    removeToast(index) {\n        this.toastService.remove(index);\n    }\n    selectAddUpdate(type) {\n        if (type === 'add') {\n            this.txtAddUpdate = 'Adicionar';\n        }\n        else {\n            this.txtAddUpdate = 'Alterar';\n        }\n    }\n    onCreateUpdate() {\n        if (!this.form.Descricao) {\n            this.toastService.add('Preencha os campos obrigatório(s)', 3000, 'error');\n            return false;\n        }\n        this.carregando = true;\n        if (!this.form.Codl) {\n            // create\n            this.httpProvider.create(this.form).subscribe((response) => {\n                if (response) {\n                    this.toastService.add(\"Dados salvos com sucesso!\", 3000, 'success');\n                    this.getAll();\n                }\n            });\n        }\n        else {\n            //update\n            this.httpProvider.update(this.form, this.form.Codl).subscribe((response) => {\n                if (response) {\n                    this.toastService.add(\"Dados alterados com sucesso!\", 3000, 'success');\n                    this.getAll();\n                }\n            });\n        }\n        return;\n    }\n    onEdit(id) {\n        if (id) {\n            this.carregando = true;\n            this.httpProvider.edit(id)\n                .subscribe(res => {\n                if (res != null && res.body.data != null) {\n                    this.form = Object.assign({}, res.body.data);\n                    this.carregando = false;\n                }\n            });\n        }\n    }\n    onDelete(id) {\n        this.idDel = id;\n    }\n    onSubmitDelete() {\n        if (this.idDel) {\n            this.carregando = true;\n            this.httpProvider.delete(this.idDel).subscribe((response) => {\n                if (response) {\n                    this.toastService.add(\"Dados deletados com sucesso!\", 3000, 'success');\n                    this.getAll();\n                }\n            });\n        }\n    }\n}\nLivroComponent.ɵfac = function LivroComponent_Factory(t) { return new (t || LivroComponent)(i0.ɵɵdirectiveInject(i1.LivroService), i0.ɵɵdirectiveInject(i2.ToastService)); };\nLivroComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: LivroComponent, selectors: [[\"app-livro\"]], decls: 2, vars: 0, template: function LivroComponent_Template(rf, ctx) { if (rf & 1) {\n        i0.ɵɵelementStart(0, \"p\");\n        i0.ɵɵtext(1, \"livro works!\");\n        i0.ɵɵelementEnd();\n    } }, styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJsaXZyby5jb21wb25lbnQuY3NzIn0= */\"] });\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}