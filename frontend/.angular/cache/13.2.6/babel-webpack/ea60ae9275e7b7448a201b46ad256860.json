{"ast":null,"code":"import _asyncToGenerator from \"/Users/macbook/Projects/php/cadastro-livros/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet RelatorioComponent = class RelatorioComponent {\n  constructor(httpProvider, toastService) {\n    this.httpProvider = httpProvider;\n    this.toastService = toastService;\n    this.itemList = [];\n    this.autorList = [];\n    this.assuntoList = [];\n    this.carregando = false;\n    this.form = {\n      Codl: null,\n      Titulo: null,\n      Editora: null,\n      Edicao: null,\n      AnoPublicacao: null,\n      Autor_CodAu: [],\n      Assunto_CodAs: 0\n    };\n    this.txtAddUpdate = '';\n    this.idDel = 0;\n  }\n  ngOnInit() {\n    this.getAll();\n    //this.getAllAutor();\n    this.getAllAssunto();\n  }\n  getAll() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      _this.carregando = true;\n      _this.httpProvider.read().subscribe(res => {\n        if (res != null && res.body.data != null) {\n          _this.itemList = res.body.data;\n          _this.carregando = false;\n        }\n      });\n    })();\n  }\n  getAllAutor() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      _this2.carregando = true;\n      _this2.httpProvider.readAutor().subscribe(res => {\n        if (res != null && res.body.data != null) {\n          _this2.autorList = res.body.data;\n          _this2.carregando = false;\n        }\n      });\n    })();\n  }\n  getAllAssunto() {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      _this3.carregando = true;\n      _this3.httpProvider.readAssunto().subscribe(res => {\n        if (res != null && res.body.data != null) {\n          _this3.assuntoList = res.body.data;\n          _this3.carregando = false;\n        }\n      });\n    })();\n  }\n  removeToast(index) {\n    this.toastService.remove(index);\n  }\n  selectAddUpdate(type) {\n    this.form = {\n      Codl: null,\n      Titulo: null,\n      Editora: null,\n      Edicao: null,\n      AnoPublicacao: null,\n      Autor_CodAu: [],\n      Assunto_CodAs: null\n    };\n    if (type === 'add') {\n      this.getAllAutor();\n      this.txtAddUpdate = 'Adicionar';\n    } else {\n      this.txtAddUpdate = 'Alterar';\n    }\n  }\n  onCreateUpdate() {\n    if (!this.form.Titulo && !this.form.Editora && !this.form.Edicao && !this.form.AnoPublicacao) {\n      this.toastService.add('Preencha os campos obrigatório(s)', 3000, 'error');\n      return false;\n    }\n    this.carregando = true;\n    this.form.Autor_CodAu = this.getSelec;\n    if (!this.form.Codl) {\n      // create\n      this.httpProvider.create(this.form).subscribe(response => {\n        if (response) {\n          this.toastService.add(\"Dados salvos com sucesso!\", 3000, 'success');\n          this.getAll();\n        }\n      });\n    } else {\n      //update\n      this.httpProvider.update(this.form, this.form.Codl).subscribe(response => {\n        if (response) {\n          this.toastService.add(\"Dados alterados com sucesso!\", 3000, 'success');\n          this.getAll();\n        }\n      });\n    }\n    return;\n  }\n  onEdit(id) {\n    if (id) {\n      this.carregando = true;\n      this.httpProvider.edit(id).subscribe(res => {\n        if (res != null && res.body.data != null) {\n          let data = res.body.data;\n          this.form = Object.assign({}, data);\n          this.autorList = data.autor;\n          this.form.Assunto_CodAs = data.assunto[0].CodAs;\n          this.carregando = false;\n        }\n      });\n    }\n  }\n  onDelete(id) {\n    this.idDel = id;\n  }\n  onSubmitDelete() {\n    if (this.idDel) {\n      this.carregando = true;\n      this.httpProvider.delete(this.idDel).subscribe(response => {\n        if (response) {\n          this.toastService.add(\"Dados deletados com sucesso!\", 3000, 'success');\n          this.getAll();\n        }\n      });\n    }\n  }\n  get autoresFilter() {\n    return this.autorList.filter(item => item.checked).map(item => item);\n  }\n  get getSelec() {\n    return this.autoresFilter.filter(item => item.checked).map(item => {\n      return this.txtAddUpdate === 'Adicionar' ? item.CodAu : item.Autor_CodAu;\n    });\n  }\n};\nRelatorioComponent = __decorate([Component({\n  selector: 'app-relatorio',\n  templateUrl: './relatorio.component.html',\n  styleUrls: ['./relatorio.component.css']\n})], RelatorioComponent);\nexport { RelatorioComponent };","map":{"version":3,"names":["__decorate","Component","RelatorioComponent","constructor","httpProvider","toastService","itemList","autorList","assuntoList","carregando","form","Codl","Titulo","Editora","Edicao","AnoPublicacao","Autor_CodAu","Assunto_CodAs","txtAddUpdate","idDel","ngOnInit","getAll","getAllAssunto","_this","_asyncToGenerator","read","subscribe","res","body","data","getAllAutor","_this2","readAutor","_this3","readAssunto","removeToast","index","remove","selectAddUpdate","type","onCreateUpdate","add","getSelec","create","response","update","onEdit","id","edit","Object","assign","autor","assunto","CodAs","onDelete","onSubmitDelete","delete","autoresFilter","filter","item","checked","map","CodAu","selector","templateUrl","styleUrls"],"sources":["/Users/macbook/Projects/php/cadastro-livros/frontend/src/app/relatorio/relatorio.component.ts"],"sourcesContent":["import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet RelatorioComponent = class RelatorioComponent {\n    constructor(httpProvider, toastService) {\n        this.httpProvider = httpProvider;\n        this.toastService = toastService;\n        this.itemList = [];\n        this.autorList = [];\n        this.assuntoList = [];\n        this.carregando = false;\n        this.form = {\n            Codl: null,\n            Titulo: null,\n            Editora: null,\n            Edicao: null,\n            AnoPublicacao: null,\n            Autor_CodAu: [],\n            Assunto_CodAs: 0\n        };\n        this.txtAddUpdate = '';\n        this.idDel = 0;\n    }\n    ngOnInit() {\n        this.getAll();\n        //this.getAllAutor();\n        this.getAllAssunto();\n    }\n    async getAll() {\n        this.carregando = true;\n        this.httpProvider.read()\n            .subscribe(res => {\n            if (res != null && res.body.data != null) {\n                this.itemList = res.body.data;\n                this.carregando = false;\n            }\n        });\n    }\n    async getAllAutor() {\n        this.carregando = true;\n        this.httpProvider.readAutor()\n            .subscribe(res => {\n            if (res != null && res.body.data != null) {\n                this.autorList = res.body.data;\n                this.carregando = false;\n            }\n        });\n    }\n    async getAllAssunto() {\n        this.carregando = true;\n        this.httpProvider.readAssunto()\n            .subscribe(res => {\n            if (res != null && res.body.data != null) {\n                this.assuntoList = res.body.data;\n                this.carregando = false;\n            }\n        });\n    }\n    removeToast(index) {\n        this.toastService.remove(index);\n    }\n    selectAddUpdate(type) {\n        this.form = {\n            Codl: null,\n            Titulo: null,\n            Editora: null,\n            Edicao: null,\n            AnoPublicacao: null,\n            Autor_CodAu: [],\n            Assunto_CodAs: null\n        };\n        if (type === 'add') {\n            this.getAllAutor();\n            this.txtAddUpdate = 'Adicionar';\n        }\n        else {\n            this.txtAddUpdate = 'Alterar';\n        }\n    }\n    onCreateUpdate() {\n        if (!this.form.Titulo && !this.form.Editora && !this.form.Edicao && !this.form.AnoPublicacao) {\n            this.toastService.add('Preencha os campos obrigatório(s)', 3000, 'error');\n            return false;\n        }\n        this.carregando = true;\n        this.form.Autor_CodAu = this.getSelec;\n        if (!this.form.Codl) {\n            // create\n            this.httpProvider.create(this.form).subscribe((response) => {\n                if (response) {\n                    this.toastService.add(\"Dados salvos com sucesso!\", 3000, 'success');\n                    this.getAll();\n                }\n            });\n        }\n        else {\n            //update\n            this.httpProvider.update(this.form, this.form.Codl).subscribe((response) => {\n                if (response) {\n                    this.toastService.add(\"Dados alterados com sucesso!\", 3000, 'success');\n                    this.getAll();\n                }\n            });\n        }\n        return;\n    }\n    onEdit(id) {\n        if (id) {\n            this.carregando = true;\n            this.httpProvider.edit(id)\n                .subscribe(res => {\n                if (res != null && res.body.data != null) {\n                    let data = res.body.data;\n                    this.form = Object.assign({}, data);\n                    this.autorList = data.autor;\n                    this.form.Assunto_CodAs = data.assunto[0].CodAs;\n                    this.carregando = false;\n                }\n            });\n        }\n    }\n    onDelete(id) {\n        this.idDel = id;\n    }\n    onSubmitDelete() {\n        if (this.idDel) {\n            this.carregando = true;\n            this.httpProvider.delete(this.idDel).subscribe((response) => {\n                if (response) {\n                    this.toastService.add(\"Dados deletados com sucesso!\", 3000, 'success');\n                    this.getAll();\n                }\n            });\n        }\n    }\n    get autoresFilter() {\n        return this.autorList.filter((item) => item.checked)\n            .map((item) => item);\n    }\n    get getSelec() {\n        return this.autoresFilter.filter((item) => item.checked)\n            .map((item) => {\n            return this.txtAddUpdate === 'Adicionar' ? item.CodAu : item.Autor_CodAu;\n        });\n    }\n};\nRelatorioComponent = __decorate([\n    Component({\n        selector: 'app-relatorio',\n        templateUrl: './relatorio.component.html',\n        styleUrls: ['./relatorio.component.css']\n    })\n], RelatorioComponent);\nexport { RelatorioComponent };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}